# 咕咕咕：

- [x] 想个好名字

- [x] 设置部分

## 生活质量更新

### 制作栏兼容

- [x] 科技贴图为什么新版制作栏不显示
- [x] 添加其他科技
- [x] 科技栏排序（完成一半，不知道官方是按什么排的）
- [x] 科技栏图标
- [x] 考虑要不要给人物增加一级的科技？让制作栏不太空
  - 解决了，不要（doge）
- [x] 科技描述语句再多支持一点

### log系统

太简单啦以至于没什么存在必要。。。

  - [x] 简单的写一个全局变量判断是否开启
  - [x] 简单包装一下c_announce函数

### 杂七杂八

- [x] 清洁扫把右键自己能不能给自己换皮肤！

## 模组本体更新

### 新的科技树CS，制作站为计算机

  - [x] 计算机，可以解锁科技

  - [ ] 可以调度任务

  - [ ] 计算机需要能源

  - [ ] 可升级（完成一半吧）

### 新的制作站EE、科技树EE

  - [x] 可以开礼物
  - [x] 3D打印机，起到融合科技的作用
  - [ ] 连接信号线部分

    - 要连接计算机，新科技的蓝图要给计算机才能解锁
    - 也就是3D打印机的科技树是取自和他连接的计算机
  - [x] 宝贵的科技描述
  - [ ] 范围容器内物品自动可制作
    - build里使用inventory:Has()来查找配方
    - inventory_replica里使用了Inventory:GetOpenContainers()来获得人物当前打开的容器列表
    - 而这个表竟然是通过UI层获取的，不好改啊
  - [x] 改一下靠近3D打印机的名字

### 信号线系统

- [ ] 要有一个信号线系统
- [ ] 需要创建一个“信号线集合”，这个集合里有所有的信号线？以及相连的所有物品？
  - 有可能要从信号发生器出发，按图的遍历算法找到所有系统
  - 信号线的component只需要实现查找和谁相连以及返回id的功能就行了
- [ ] 将一个信号系统注册到全局，去除信号线，只保留连接的东西，从而判断系统能做什么工作
- [ ] 判断一个信号系统是否成立的依据应该是信号发生器，考虑做一个component
- [ ] 可以接受信号的设施也做一个component
- [ ] 基本门
- [ ] 也许要有信号发生器
- [ ] 按钮、拉杆

### 电路部分

#### 基础的导线

- [x] 导线目前看不见。。。
- [x] 导线要有不同的状态，根据方向改形态
- [x] 导线的放置语句还是墙的
  - 可能有些困难，目前想到的就是新建一个动作
  - 解决了，参考棱镜。原来大佬也有和我一样的问题哈哈哈哈哈
  -  和wallbuilder标签冲突了要删掉
- [x] 导线现在不能破坏？
- [x] 掉落物这不整个烂电线？
- [x] 可以用可靠的胶布修理烂电线
- [x] 导线要记录自己的连接状态（onsave）
  - 真是傻了，既然不管先后怎么放置导线都必须成为一个系统，那么加载的时候直接注册完全可行嘛！
- [x] 电线的碰撞体积之类的机制应该更像白木地垫一点
  - [x] 应该删除电线的碰撞体积啊
  - [x] 现在建造范围比白木地垫更好一点了
  - [x] 以及不能重复造电线

#### 导线系统（供电系统）

- [x] 首先单根导线要知道自己的位置

- [x] 其次要检查相连接的情况，是否连接了导线、电源、用电器，并根据连接情况选择合适的贴图

- [x] 然后导线要更新周围导线的状态，让其他导线的贴图显示完整

- [x] 要想一下导线怎么和用电器以及电源连接

- [x] 这时候，导线提供一个函数，让自己的连接状态可以被读取到，bug，~~不能通过调用inst的函数来获取连接状态~~（也不看看你传的参是什么！）

  ---

- [x] 导线设置完成后，触发一个检查整个游戏电路状态的函数

- [x] 这个函数中首先有以电源为单位的一个大表

- [x] 如果导线连接的GUID存在于某一个电路系统中，那么~~这个系统执行一遍图的遍历并更新大表~~，直接合并就行了，电源系统比较简单

- [x] 电线被毁坏时更新电路

- [ ] 具体的触发暂时考虑可以用事件来完成

- [ ] 触发时某个电器的功能打开，电源开始消耗

- [x] 电源

- [x] 大概理解了一个bug，~~lua里东西复制之后position就变成000了~~还是传参！还有lua对于表是引用传递！

- [ ] 用电器重复注册问题，初步判断，当电池旁边新建电线的时候会多注册进去一个`109507 - batterysm`

### 管道系统（有生之年系列）

- [ ] 运载物品的管道

- [ ] 物品收集器

- [x] 宏伟蓝图（这个绝对是有生之年了，只是放这里，虽然是梦开始的地方。。。）

  **因为“基地投影”模组把这个功能实现了，所以我不用写了**

  - [x] 可以添加一系列的背景物

  - [x] 带个帽子进入建造模式，改时间流速和饱食度什么的

  - [x] 放置完后也许可以一键制作？

## 万恶的重构

- [ ] 变量最好在loop内创建，长表最好在loop外创建
- [ ] 添加元素`tab[#tab+1] = a`
- [ ] 数组表判空`#tab>0`（不能有中断）
- [ ] 大表预分配内存避免rehash
- [ ] 尽量local，常用函数设成局部变量
- [ ] string的buffer要用table
- [ ] 能用数组就用数组
- [ ] 建反向表空间换时间
